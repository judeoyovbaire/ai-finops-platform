apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: ai-finops

resources:
  # Core infrastructure
  - namespace.yaml
  - network-policies.yaml
  - resource-quotas.yaml

  # Metrics collection
  - dcgm-exporter.yaml
  - prometheus.yaml
  - alertmanager.yaml

  # Cost analysis
  - opencost.yaml
  - gpu-enricher.yaml
  - infracost.yaml

  # Multi-cluster aggregation
  - thanos.yaml

  # Visualization
  - grafana.yaml
  - grafana-dashboards.yaml

  # RBAC and Ingress
  - gpu-enricher-rbac.yaml
  - ingress.yaml

  # Secrets management (optional - requires ESO installed)
  # - external-secrets.yaml

labels:
  - pairs:
      app.kubernetes.io/part-of: ai-finops-platform